scope Bristleburst initializer init
	import DamageType
	import StructuredDD

	globals
		constant int ARCH_ID = 'h01G'
		constant int ARMOR = 'A00R'
		constant int EFFECT = 'A003'
	end

	function h()
		unit tU
		unit dS = GetEventDamageSource()
		if GetUnitTypeId(dS) == ARCH_ID and DamageType.get() == DamageType.SPELL then
			tU = GetTriggerUnit()
			UnitAddAbility(tU, ARMOR)
			UnitAddAbility(tU, EFFECT)
		end
	end

	function init()
		StructuredDD.addHandler(function h)
	end
