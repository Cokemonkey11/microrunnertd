package GeomancerWave
	import UnitApi
	import DamageType
	import StructuredDD

	constant ARCH_ID = 'h01U'

	function h()
		let dS = GetEventDamageSource()
		let tU = GetTriggerUnit()

		if GetUnitTypeId(dS) == ARCH_ID and DamageType.get() == DamageType.ATTACK and GetUnitAbilityLevel(tU, UnitApi.IMMUNE) < 1
			IssueTargetOrder(dS, "carrionswarm", tU)
		end
	end

	init
		StructuredDD.addHandler(function h)
	end
