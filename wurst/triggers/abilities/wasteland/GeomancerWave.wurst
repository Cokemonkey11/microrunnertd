package GeomancerWave
import UnitApi
import DamageType
import DamageDetection2

constant ARCH_ID = 'h01U'

function h()
	let dS = GetEventDamageSource()
	let tU = GetTriggerUnit()

	if GetUnitTypeId(dS) == ARCH_ID and getDamageType() == DamageType.ATTACK and GetUnitAbilityLevel(tU, UnitApi.IMMUNE) < 1
		IssueTargetOrder(dS, "carrionswarm", tU)

init
	addOnDamageFunc(Condition(function h))
