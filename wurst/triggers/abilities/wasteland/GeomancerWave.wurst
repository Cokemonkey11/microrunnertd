package GeomancerWave
import UnitApi
import DamageEvent

constant ARCH_ID = 'h01U'

function h()
	let dS = DamageEvent.getSource()
	let tU = DamageEvent.getTarget()

	if GetUnitTypeId(dS) == ARCH_ID and DamageEvent.getType() == ATTACK and GetUnitAbilityLevel(tU, UnitApi.IMMUNE) < 1
		IssueTargetOrder(dS, "carrionswarm", tU)

init
	DamageEvent.addListener() () ->
		h()
