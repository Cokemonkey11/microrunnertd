package AuraOfSacrificeUpgrade
	import RegisterPlayerUnitEvent
	import Sounds

	constant int ID_UPGRADE_SACRIFICE = 'h02W'
	constant int ID_ABILITY_SACRIFICE = 'A01B'
	constant string THALL_SOUND = "thall.wav"

	function a()
		unit sold = GetSoldUnit()
		int  id   = sold.getTypeId()

		if id == ID_UPGRADE_SACRIFICE
			sold.remove()

			unit selling = GetSellingUnit()
			RemoveUnitFromStock(selling, id)
			selling.addAbility(ID_ABILITY_SACRIFICE)

			Sounds.playForPlayer(THALL_SOUND, 1., selling.getOwner())
		end
	end

	init
		registerPlayerUnitEvent(EVENT_PLAYER_UNIT_SELL, function a)
		Sounds.preload(THALL_SOUND)
	end